이 장에선

-   상태 관리 라이브러리의 필요성
-   최근 많이 주목받는 상태 관리 라이브러리의 작동 방식

을 본다

#   5.1 상태 관리는 왜 필요한가?

기본적으로 웹 애플리케이션에서의 상태 : 상호 작용이 가능한 모든 요소의 현재 값

-   웹 애플리케이션에서 상태로 분류될 수 있는 대표적인 것들
    
    -   UI
        -   ex) 다크/라이트 모드, input 등
    -   URL
        -   브라우저에서 관리하고 있는 상태 값
        -   ex) https://www.test.com/adults=2 에서
            -   adults=2는 상태
	        -   이 상태는 사용자의 라우팅에 따라 변경된다
    -   form
        -   폼에도 상태가 존재
        -   로딩 중인지, 제출 됐는지, 값이 유효한지 등 상태로 관리된다
    -   서버에서 가져온 값
    
    _ui, url, form 도 상태구나_
    

tearing : 하나의 상태가 변화함에 따라 즉각적으로 모든 요소들이 서로 다른 결과물을 사용자에게 보여주는 현상

_와우 이것에 대한 용어도 있구나. 근데 찢어진다고 표현하는게 좀 새롭다_

##   5.1.1 리액트 상태 관리의 역사

-   **Context API**
    
    -   리액트 팀이 리액트 16.3에서 출시
    -   props drilling 없이 전역 상태를 하위 컴포넌트에 주입해서 원하는 위치에서 사용할 수 있음
    -   상태 관리가 아닌 주입을 도와주니까 → 사용 시 주의 필요
    
-   **훅의 탄생, 그리고 React Query와 SWR**
    
    _리액트 쿼리 한번도 안 사용해봄_
    
    사용자 훅과 state의 등장으로 이전엔 볼 수 없던 방식의 상태 관리 등장 : react query, swr
    
    -   상태 관리 라이브러리 라이브러리
    -   api 호출에 대한 상태를 관리하고 있기에 http 요청에 특화됨

-   **Recoil, Zustand, Jotai**
    
    - SWR, React Query 🆚 Recoil, Zustand, Jotai
    
	    -   전자 : http 요청에 대해서만 쓸 수 있음.
	        
	    -   후자 : 전자보다 더 범용적으로 쓸 수 있음
	        
    -   상태 관리 라이브러리
        
    -   훅을 사용해 작은 크기의 상태를 효율적으로 관리
        
    -   저장소를 보면 모두 peerDependencies로 리액트 특정 버전 이상을 요구
        
    -   애초에 리액트와의 연동을 전제로 작동해서 별도로 다른 라이브러리를 설치하지 않아도 된다. 즉, Redux처럼 `redux` + `react-redux`(추가적인 패키지)를 함께 설치할 필요 없이, `recoil` 패키지만 설치하면 React에서 바로 사용할 수 있음.
        
    -   기존 상태 관리 라이브러리 아쉬움(전역 상태 관리 패러다임)에서 벗어나 개발자가 원하는 만큼의 상태를 지역적으로 관리 가능 + 훅을 지원해서 함수 컴포넌트에서 쉽게 사용할 수 있다.

##   5.1.2 정리

일정 등 여러가지 환경이 여의치 않으면 익숙한 것을 선택하는 것도 나쁘지 않지만,

다양한 옵션을 보고 비교하면서 어떤 식으로 구현하고 있는지 보는 것이 도움이 많이 될것이다.

# 5.2 리액트 훅으로 시작하는 상태 관리

#   5.2 리액트 훅으로 시작하는 상태 관리

비교적 오랜 기간 리액트 생태계에선 리액트 애플리케이션의 상태 관리를 위해 리덕스에 의존했다. 예전 리액트 코드를 보면 리액트와 리덕스가 함께 설치돼있는 것을 흔히 볼 수 있었다.

현재는 context api, useState 등의 등장으로 컴포넌트에 걸쳐서 재사용하는 방법들이 점차 등장하고 있고, 덕분에 리덕스 외의 상태 관리 라이브러리를 선택하는 경우도 많다.

##   5.2.1 가장 기본적인 방법: useState와 useReducer

리액트 훅을 기반으로 만든 사용자 정의 훅은 함수 컴포넌트에서 손쉽게 재사용 가능하다.

useState와 useReducer

-   useState는 useReducer로 구현됨
    
-   공통점 : 모두 지역 상태 관리를 위해 만들어졌다
    
-   차이점 : 약간의 구현상 차이
    
-   useState, useReducer를 사용하는 사용자 정의 훅의 한계 :
    
    훅을 사용할 때마다 컴포넌트별로 초기화되므로 컴포넌트에 따라 서로 다른 상태를 가진다.


	_난 상태가 지역적이라는게 마냥 단점이라고 생각하지 않아. 오히려 컴포넌트의 독립성이 더 커지잖아. 장단이 있다~_
