# 3. ë¦¬ì•¡íŠ¸ í›… ê¹Šê²Œ ì‚´í´ë³´ê¸°

**í›…**: í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸° ë©”ì„œë“œë¥¼ ëŒ€ì²´í•˜ëŠ” ê¸°ëŠ¥

## 3.1 ë¦¬ì•¡íŠ¸ì˜ ëª¨ë“  í›… íŒŒí—¤ì¹˜ê¸°

### 3.1.1 useState

ìƒíƒœë¥¼ ì •ì˜í•˜ê³ , ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í›….

#### useState êµ¬í˜„ ì‚´í´ë³´ê¸°

```jsx
const [state, setState] = useState(initialState);
```

ì•„ë˜ ì½”ë“œë¥¼ ë³´ì. ì•„ë˜ ì½”ë“œê°€ ë¦¬ë Œë”ë§ì´ ë ê¹Œ?

```jsx
function Componet() {
  const [, triggerRender] = useState();

  let state = "hello";

  function handleClick() {
    state = "world";
    triggerRender();
  }

  return <button onClick={handleClick}>{state}</button>;
}
```

useState ë°˜í™˜ê°’ì˜ ë‘ ë²ˆì§¸ ì›ì†Œë¥¼ ì‹¤í–‰í•´ ë Œë”ë§ì´ ì¼ì–´ë‚˜ê²Œë” í–ˆì§€ë§Œ state ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤. ì´ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?

useState í›…ì€ ë Œë”ë§ ì‹œì ì— ì´ˆê¸°í™”ëœ ê°’ì„ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ ìœ„ ì½”ë“œì—ì„œ state ê°’ì€ ì´ˆê¸°í™”ëœ ê°’ì¸ 'hello'ë¥¼ ë°˜í™˜í•œë‹¤.

[ ì˜ˆìƒë˜ëŠ” useState í›…ì„ ê°€ë³ê²Œ êµ¬í˜„í•œ ì½”ë“œ ]

```jsx
function useState(initialState) {
  let internalState = initialState;

  function state() {
    return internalState;
  }

  function setState(newState) {
    internalState = newState;
  }

  return [state, setState];
}
```

ìœ„ ì½”ë“œì—ì„œ state í•¨ìˆ˜ëŠ” í˜„ì¬ ìƒíƒœë¥¼ ë°˜í™˜í•˜ê³ , setState í•¨ìˆ˜ëŠ” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ìƒíƒœê°€ ë³€ê²½ë˜ì–´ ë²„íŠ¼ í…ìŠ¤íŠ¸ê°€ 'world'ë¡œ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.

[ ì‹¤ì œ ë¦¬ì•¡íŠ¸ì˜ useState í›…ê³¼ ìœ ì‚¬í•˜ê²Œ êµ¬í˜„í•œ ì½”ë“œ ]

ì‹¤ì œ ë¦¬ì•¡íŠ¸ëŠ” í´ë¡œì €ë¥¼ ì´ìš©í•´ ìœ„ ì½”ë“œë¥¼ êµ¬í˜„í•œë‹¤. ì‹¤ì œ ì½”ë“œëŠ” useReducer í›…ì„ ì´ìš©í•´ êµ¬í˜„ë˜ì–´ ìˆë‹¤. ì•„ë˜ ì½”ë“œëŠ” ì‹¤ì œ ë¦¬ì•¡íŠ¸ì˜ useState í›…ê³¼ ìœ ì‚¬í•˜ê²Œ êµ¬í˜„í•œ ì½”ë“œì´ë‹¤.

```jsx
const MyReact = (function() {
	const global = {};
	let index = 0;

	function useState(initialState) {
		if (!global.states) {
			global.states = [];
		}

		// í˜„ì¬ indexì— í•´ë‹¹í•˜ëŠ” ìƒíƒœê°€ ì—†ìœ¼ë©´ ì´ˆê¸°ê°’ì„ í• ë‹¹í•œë‹¤.
		const currentState = global.states[index] || initialState;
		global.states[index] = currentState;

		const setState = (function() => {
			// í˜„ì¬ indexë¥¼ í´ë¡œì €ë¡œ ê°€ë‘¬ë†”ì„œ ì´í›„ì—ë„ ê³„ì†í•´ì„œ ë™ì¼í•œ indexì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
			let currentIndex = index;
			return function (value) {
				global.states[currentIndex] = value;
				render();
			}
		})();

		index++;

		return [currentState, setState];
	}

	function Component() {
		const [state, setState] = useState(0);
		//...
	}
})()
```

ì´ë ‡ë“¯ í´ë¡œì €ì— ì˜ì¡´í•´ êµ¬í˜„ë¼ ìˆì„ ê²ƒì´ë¼ ì§ì‘í•  ìˆ˜ ìˆë‹¤. í´ë¡œì €ë¥¼ ì‚¬ìš©í•´ ì™¸ë¶€ì— í•´ë‹¹ ê°’ì„ ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê³ , í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ê°€ ë§¤ë²ˆ ì‹¤í–‰ë˜ë”ë¼ë„ useStateì—ì„œ ì´ì „ì˜ ê°’ì„ ì •í™•í•˜ê²Œ êº¼ë‚´ ì“¸ ìˆ˜ ìˆë„ë¡ í•œë‹¤.

#### ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”

```jsx
// ë°”ë¡œ ê°’ì„ ì§‘ì–´ë„£ëŠ”ë‹¤.
const [state, setState] = useState(
  Number.parseInt(window.localStorage.getItem(cacheKey))
);

// lazy initialization
// í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ ê°’ì„ ì´ˆê¸°í™”í•œë‹¤.
const [state, setState] = useState(() =>
  Number.parseInt(window.localStorage.getItem(cacheKey))
);
```

ë¦¬ì•¡íŠ¸ ê³µì‹ ë¬¸ì„œì—ì„œ ì´ëŸ¬í•œ ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”ëŠ” useStateì˜ ì´ˆê¹ƒê°’ì´ ë³µì¡í•˜ê±°ë‚˜ ë¬´ê±°ìš´ ì—°ì‚°ì„ í¬í•¨í•˜ê³  ìˆì„ ë•Œ ì‚¬ìš©í•˜ë¼ê³  ë¼ ìˆë‹¤. ì´ ê²Œìœ¼ë¥¸ ì´ˆê¸°í™” í•¨ìˆ˜ëŠ” ì˜¤ë¡œì§€ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ ì‹¤í–‰ëœë‹¤. (ë¦¬ë Œë”ë§ ì‹œì—ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.)

**ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ê¹Œ?**

- localStorage, sessionStorage ì ‘ê·¼
- map, filter, find ë“± ë°°ì—´ ì ‘ê·¼
- ì´ˆê¸°ê°’ ê³„ì‚°ì„ ìœ„í•´ í•¨ìˆ˜ í˜¸ì¶œì´ í•„ìš”í•œ ê²½ìš°(ë¬´ê±°ìš´ ì—°ì‚°)

### 3.1.2 useEffect

useEffectëŠ” ìƒëª…ì£¼ê¸° ë©”ì„œë“œë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ í›…ì€ ì•„ë‹ˆë‹¤.

ì •ì˜: useEffectëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ ì»´í¬ë„ŒíŠ¸ì˜ ì—¬ëŸ¬ ê°’ë“¤ì„ í™œìš©í•´ ë™ê¸°ì ìœ¼ë¡œ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ë§Œë“œëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. 'ì–¸ì œ' ì¼ì–´ë‚˜ëŠ”ì§€ë³´ë‹¤ ì–´ë–¤ ìƒíƒœê°’ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ëŠ”ì§€ê°€ ë” ì¤‘ìš”í•˜ë‹¤.

#### useEffectë€?

ì²« ë²ˆì§¸ ì¸ìˆ˜: ë¶€ìˆ˜ íš¨ê³¼ê°€ í¬í•¨ëœ í•¨ìˆ˜
ë‘ ë²ˆì§¸ ì¸ìˆ˜: ì˜ì¡´ì„± ë°°ì—´

ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.

useEffectëŠ” ì˜ì¡´ì„±ì˜ ê°’ì´ ì´ì „ê³¼ ë‹¤ë¥¸ ê²Œ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì‹¤í–‰í•˜ëŠ” í‰ë²”í•œ í•¨ìˆ˜ì´ë‹¤.

ë”°ë¼ì„œ stateì™€ propsì˜ ë³€í™” ì†ì—ì„œ ì¼ì–´ë‚˜ëŠ” ë Œë”ë§ ê³¼ì •ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë¶€ìˆ˜ íš¨ê³¼ í•¨ìˆ˜ë¼ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤.

#### í´ë¦°ì—… í•¨ìˆ˜ì˜ ëª©ì 

í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì´ì „ stateë¥¼ ì°¸ì¡°í•´ ì‹¤í–‰ëœë‹¤. ìƒˆë¡œìš´ ê°’ê³¼ í•¨ê»˜ ë Œë”ë§ëœ ë’¤ì— ì‹¤í–‰ë˜ì§€ë§Œ ë³€ê²½ëœ ê°’ì„ ì½ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

í•¨ìˆ˜ê°€ ì •ì˜ëì„ ë‹¹ì‹œì— ì„ ì–¸ëë˜ ì´ì „ ê°’ì„ ë³´ê³  ì‹¤í–‰ëœë‹¤.

ì´ ì‚¬ì‹¤ì„ ì¢…í•©í•´ ë³´ë©´ useEffectì— ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í–ˆì„ ë•Œ ì™œ í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ ì§€ì›Œì•¼ í•˜ëŠ”ì§€ ì´í•´í•  ìˆ˜ ìˆë‹¤.

useEffect ì½œë°±ì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì´ì „ì˜ í´ë¦°ì—… í•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤ë©´ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ë’¤ì— ì½œë°±ì„ ì‹¤í–‰í•œë‹¤. ë”°ë¼ì„œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ê¸° ì „ì— ì´ì „ì— ë“±ë¡í–ˆë˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‚­ì œí•˜ëŠ” ì½”ë“œë¥¼ í´ë¦°ì—… í•¨ìˆ˜ì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ íŠ¹ì • ì´ë²¤íŠ¸ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì¤‘ë³µ ë“±ë¡ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

ì´ì²˜ëŸ¼ í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì–¸ë§ˆìš´íŠ¸ ê°œë…ê³¼ëŠ” ì¡°ê¸ˆ ì°¨ì´ ìˆë‹¤.

**í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì–¸ë§ˆìš´íŠ¸ë¼ê¸°ë³´ë‹¤ëŠ” í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ëì„ ë•Œ ì´ì „ ìƒíƒœê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì.**

#### ì˜ì¡´ì„± ë°°ì—´

ë¹ˆ ë°°ì—´ë¡œ ë‘”ë‹¤ë©´ ë¹„êµí•  ì˜ì¡´ì„±ì´ ì—†ë‹¤ê³  íŒë‹¨í•´ ë Œë”ë§ ì‹œì—ë§Œ ì‹¤í–‰ëœë‹¤.

ê·¸ë ‡ë‹¤ë©´, ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ëŠ” useEffectê°€ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ëœë‹¤ë©´ ê·¸ëƒ¥ useEffect ì—†ì´ ì¨ë„ ë˜ëŠ” ê²Œ ì•„ë‹ê¹Œ?

```jsx
function Component() {
  console.log("ë Œë”ë§ ëì–´ìš”");
}

function Component2() {
  useEffect(() => {
    console.log("ë Œë”ë§ ëì–´ìš”");
  });
}
```

ë‘ ì½”ë“œì˜ ì°¨ì´ì 

1. ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ê´€ì ì—ì„œ useEffectëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì¥í•´ ì¤€ë‹¤. useEffect ë‚´ë¶€ì—ì„œëŠ” window ê°ì²´ì˜ ì ‘ê·¼ì— ì˜ì¡´í•˜ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.
2. useEffectëŠ” ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì˜ ë¶€ìˆ˜ íš¨ê³¼, ì¦‰ ë Œë”ë§ì´ ì™„ë£Œëœ ì´í›„ì— ì‹¤í–‰ëœë‹¤. ë°˜ë©´ 1ë²ˆê³¼ ê°™ì´ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ ì§ì ‘ ì‹¤í–‰ì€ ë Œë”ë§ ë„ì¤‘ì— ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ 2ë²ˆê³¼ ë‹¬ë¦¬ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì˜ ê²½ìš°ì— ì„œë²„ì—ì„œë„ ì‹¤í–‰ëœë‹¤. ê·¸ë¦¬ê³  ì´ ì‘ì—…ì€ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì˜ ë°˜í™˜ì„ ì§€ì—°ì‹œí‚¤ëŠ” í–‰ìœ„ë‹¤. ì¦‰ ë¬´ê±°ìš´ ì‘ì—…ì¼ ê²½ìš° ë Œë”ë§ì„ ë°©í•´í•˜ë¯€ë¡œ ì„±ëŠ¥ì— ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.

âœ… **useEffectëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ëœ í›„ì— ì–´ë– í•œ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì¼ìœ¼í‚¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í›…ì´ë¼ëŠ” ê±¸ ëª…ì‹¬í•˜ì.**

#### useEffectë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì 

`eslint-disable-line react-hooks/exhaustive-deps` ì£¼ì„ì€ ìµœëŒ€í•œ ìì œí•˜ë¼

useEffectëŠ” ë°˜ë“œì‹œ ì˜ì¡´ì„± ë°°ì—´ë¡œ ì „ë‹¬í•œ ê°’ì˜ ë³€ê²½ì— ì˜í•´ ì‹¤í–‰ë¼ì•¼ í•˜ëŠ” í›…ì´ë‹¤.

ì •ë§ë¡œ ì˜ì¡´ì„±ìœ¼ë¡œ []ê°€ í•„ìš”í•˜ë‹¤ë©´ ìµœì´ˆì— í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëì„ ì‹œì ì—ë§Œ ì½œë°± í•¨ìˆ˜ ì‹¤í–‰ì´ í•„ìš”í•œì§€ë¥¼ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•˜ì.

useEffectì˜ ë¹ˆ ë°°ì—´ì„ ë„˜ê¸°ê¸° ì „ì— ì •ë§ë¡œ useEffectì˜ ë¶€ìˆ˜ íš¨ê³¼ê°€ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœì™€ ë³„ê°œë¡œ ì‘ë™í•´ì•¼ë§Œ í•˜ëŠ”ì§€, í˜¹ì€ ì—¬ê¸°ì„œ í˜¸ì¶œí•˜ëŠ” ê²Œ ìµœì„ ì¸ì§€ ê²€í† í•˜ì.

#### useEffectì˜ ì²« ë²ˆì§¸ ì¸ìˆ˜ì— í•¨ìˆ˜ëª…ì„ ë¶€ì—¬í•˜ë¼

useEffectì˜ ì½”ë“œê°€ ë³µì¡í•˜ê³  ë§ì•„ì§ˆìˆ˜ë¡ ë¬´ìŠ¨ ì¼ì„ í•˜ëŠ”ì§€ íŒŒì•…í•˜ê¸° ì–´ë µë‹¤. **ì ì ˆí•œ ê¸°ëª…í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ ë³€ìˆ˜ì˜ ëª©ì ì„ íŒŒì•…í•˜ê¸° ì‰½ë‹¤.**

#### ê±°ëŒ€í•œ useEffectë¥¼ ë§Œë“¤ì§€ ë§ˆë¼

ê°€ëŠ¥í•œ ê°„ê²°í•˜ê³  ê°€ë³ê²Œ ìœ ì§€í•˜ì. ë¶€ë“ì´í•˜ê²Œ í° useEffectë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´, ì‘ì€ ë‹¨ìœ„ë¡œ useEffectë¥¼ ë¶„ë¦¬í•˜ì.

ë§Œì•½ ì˜ì¡´ì„± ë°°ì—´ì— ë¶ˆê°€í”¼í•˜ê²Œ ì—¬ëŸ¬ ë³€ìˆ˜ê°€ ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ìƒí™©ì´ë¼ë©´ ìµœëŒ€í•œ useCallbackê³¼ useMemo ë“±ìœ¼ë¡œ ì‚¬ì „ì— ì •ì œí•œ ë‚´ìš©ë“¤ë§Œ useEffectì— ë‹´ì•„ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì–¸ì œ useEffectê°€ ì‹¤í–‰ë˜ëŠ”ì§€ ì¢€ ë” ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ìˆë‹¤.

#### ë¶ˆí•„ìš”í•œ ì™¸ë¶€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì§€ ë§ˆë¼

í¬ê¸°ê°€ ì‘ì€ ê²ƒê³¼ ê°™ì€ ë§¥ë½ì—ì„œ useEffectê°€ ì‹¤í–‰í•˜ëŠ” ì½œë°± ë˜í•œ ë¶ˆí•„ìš”í•˜ê²Œ ì¡´ì¬í•´ì„œëŠ” ì•ˆëœë‹¤. useEffect ë°–ì— í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ë©´ ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ë§ì•„ì§€ê³  ê°€ë…ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤. useEffect ë‚´ì—ì„œ ì‚¬ìš©í•  ë¶€ìˆ˜ íš¨ê³¼ë¼ë©´ ë‚´ë¶€ì—ì„œ ë§Œë“¤ì–´ì„œ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ëŠ” í¸ì´ í›¨ì”¬ ë„ì›€ì´ ëœë‹¤.

> ì™œ useEffectì˜ ì½œë°± ì¸ìˆ˜ë¡œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë°”ë¡œ ë„£ì„ ìˆ˜ ì—†ì„ê¹Œ?
>
> useEffectì—ì„œ ë¹„ë™ê¸°ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš° ê²½ìŸ ìƒíƒœê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ì„œ ìˆœì„œë¥¼ ë³´ì¥í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.
> í•˜ì§€ë§Œ, useEffect ë‚´ë¶€ì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì„ ì–¸í•´ì„œ ì‹¤í–‰í•˜ê±°ë‚˜ ì¦‰ì‹œ ì‹¤í–‰ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê°€ëŠ¥í•˜ë‹¤.

### 3.1.3 useMemo

useMemoëŠ” ë¹„ìš©ì´ í° ì—°ì‚°ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì €ì¥(ë©”ëª¨ì´ì œì´ì…˜)í•´ ë‘ê³ , ì´ ì €ì¥ëœ ê°’ì„ ë°˜í™˜í•˜ëŠ” í›…ì´ë‹¤.

```jsx
import { useMemo } from "react";

const memoizedValue = useMemo(() => expensiveComputation(a, b, [a, b]));
```

- ì²«ë²ˆì§¸ ì¸ìˆ˜: ì–´ë– í•œ ê°’ì„ ë°˜í™˜í•˜ëŠ” ìƒì„± í•¨ìˆ˜
- ë‘ë²ˆì§¸ ì¸ìˆ˜: ì˜ì¡´í•˜ëŠ” ê°’ì˜ ë°°ì—´

ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ ë³€ê²½ëë‹¤ë©´ ì²« ë²ˆì§¸ ì¸ìˆ˜ì˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ í›„ì— ê·¸ ê°’ì„ ë°˜í™˜í•˜ê³  ê·¸ ê°’ì„ ë‹¤ì‹œ ê¸°ì–µí•´ ë‘˜ ê²ƒì´ë‹¤.

**useMemoë¡œ ì»´í¬ë„ŒíŠ¸ë„ ë©”ëª¨ì´ì œì´ì…˜í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ `React.memo`ë¥¼ ì“°ëŠ” ê²ƒì´ ë” í˜„ëª…í•˜ë‹¤.**

'ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ì—°ì‚°'ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

### 3.1.4 useCallback

useMemoê°€ ê°’ì„ ê¸°ì–µí•œë‹¤ë©´, useCallbackì€ ì¸ìˆ˜ë¡œ ë„˜ê²¨ë°›ì€ ì½œë°± ìì²´ë¥¼ ê¸°ì–µí•œë‹¤.

íŠ¹ì • í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šê³  ë‹¤ì‹œ ì¬ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤.

useCallbackì„ ì¶”ê°€í•˜ë©´ í•´ë‹¹ ì˜ì¡´ì„±ì´ ë³€ê²½ëì„ ë•Œë§Œ í•¨ìˆ˜ê°€ ì¬ìƒì„±ëœë‹¤. ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ ì¬ìƒì„±ì„ ë§‰ì•„ ë¦¬ë Œë”ë§ì„ ë°©ì§€í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ì.

- **TIP**: ê¸°ëª…í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ í¬ë¡¬ ê°œë°œì ë„êµ¬ì—ì„œ ë””ë²„ê¹…í•˜ê¸° í¸í•˜ë‹¤.

**useCallbackì€ useMemoë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.**

```jsx
export function useCallback(callback, args) {
  currentHook = 8;
  return useMemo(() => callback, args);
}
```

**ì•„ë˜ ë‘ í•¨ìˆ˜ì˜ ì‘ë™ì€ ë™ì¼í•˜ë‹¤.**

```jsx
const handleClick1 = useCallback(() => {
	setCounter((prev) => prev + 1)
}, [])

const handleClick1 = useMemo(() => {
	return () => setCounter((prev) => prev + 1)
}, [])
```

> ê¸°ì–µí•´ì•¼í•  ì ! - `useCallback`, `useMemo`ëŠ” ë™ì¼í•œ ì—­í• ì„ í•œë‹¤.

### 3.1.5 useRef

useState ì™€ ë™ì¼í•˜ê²Œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ë„ ë³€ê²½ ê°€ëŠ¥í•œ ìƒíƒœê°’ì„ ì €ì¥í•œë‹¤ëŠ” ê³µí†µì ì´ ìˆë‹¤.

**í° ì°¨ì´ì  ë‘ê°€ì§€**

- useRefëŠ” ë°˜í™˜ê°’ì¸ ê°ì²´ ë‚´ë¶€ì— ìˆëŠ” currentë¡œ ê°’ì— ì ‘ê·¼ ë˜ëŠ” ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- useRefëŠ” ê·¸ ê°’ì´ ë³€í•˜ë”ë¼ë„ ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.


**ìƒê°í•´ë³´ê¸°**: useRefëŒ€ì‹  ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ê°’ì„ ë‘”ë‹¤ë©´?

ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ì§€ ì•Šì•˜ìŒì—ë„ ì™¸ë¶€ì˜ ë³€ìˆ˜ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì¡´ì¬í•¨. ì´ëŠ” ë©”ëª¨ë¦¬ì— ë¶ˆí•„ìš”í•œ ê°’ì„ ê°–ê²Œí•˜ëŠ” ì•…ì˜í–¥ì„ ë¯¸ì¹œë‹¤.

ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ê°€ ì—¬ëŸ¬ ë²ˆ ìƒì„±ëœë‹¤ë©´ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°€ë¦¬í‚¤ëŠ” ê°’ì´ ëª¨ë‘ ë™ì¼í•œ ë³€ìˆ˜ì¼ ê²ƒì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ë‹¹ í•˜ë‚˜ì˜ ê°’ì„ í•„ìš”ë¡œ í•  ê²ƒì´ë‹¤.

**ì¼ë°˜ì ì¸ ì‚¬ìš©ì€ DOMì— ì ‘ê·¼í•˜ê³  ì‹¶ì„ ë•Œ ì´ë‹¤.**

useRefë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ê²½ìš°ëŠ”, useStateì˜ ì´ì „ ê°’ì„ ì €ì¥í•˜ëŠ” usePrevious() ê°™ì€ í›…ì„ êµ¬í˜„í•  ë•Œë‹¤.

```jsx
usePrevious(value) {
	const ref = useRef()

	useEffect(() => {
		ref.current = value
	}, [value]) // valueê°€ ë³€ê²½ë˜ë©´ ê·¸ ê°’ì„ refì— ë„£ì–´ë‘”ë‹¤.
	return ref.current
}

function SomeComponent() {
	const [counter, setCounter] = useState(0)
	const previousCounter = usePrevious(counter)

	function handleClick() {
		setCounter((prev) => prev + 1)
	}

	return (
		<button onClick={handleClick}>{counter} {previousCounter} </button>
	)
}
```

**useRef êµ¬í˜„**

```jsx
export function useRef(initialValue) {
	currentHook = 5
	return useMemo(() => ({ current: initialValue }), [])
}
```

ê°’ì´ ë³€ê²½ë¼ë„ ë Œë”ë§ë˜ë©´ ì•ˆëœë‹¤ëŠ” ì , ì‹¤ì œ ê°’ì€ ê°ì²´ í˜•íƒœë¡œ ìˆë‹¤ëŠ” ì ì„ ë– ì˜¬ë ¤ë³´ì.

ë Œë”ë§ì— ì˜í–¥ì„ ë¯¸ì¹˜ë©´ ì•ˆ ë˜ê¸° ë•Œë¬¸ì— useMemoì— ì˜ë„ì ìœ¼ë¡œ ë¹ˆ ë°°ì—´ì„ ì„ ì–¸í•´ ë’€ê³ , ì´ëŠ” ê° ë Œë”ë§ë§ˆë‹¤ ë™ì¼í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¬ ê²ƒì´ë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ íŠ¹ì§•, ê°ì²´ì˜ ê°’ì„ ë³€ê²½í•´ë„ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë– ì˜¬ë¦¬ë©´ useMemoë¡œ useRefë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

### 3.1.6 useContenxt

**Contextë€?**

ContextëŠ” ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì—ì„œ ì»´í¬ë„ŒíŠ¸ ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.

ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ê³„ì† propsë¥¼ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ê²½ìš° ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ê°€ ê¹Šì–´ì§€ë©´ì„œ ì½”ë“œê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤. ì´ë¥¼ props drillingì´ë¼ê³  í•œë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Contextë¥¼ ì‚¬ìš©í•œë‹¤.

#### Contextë¥¼ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” useContext í›…

```jsx
const Context = (createContext < { hello: string }) | (undefined > undefined);

function ParentComponent() {
  return (
    <Context.Provider value={{ hello: "react" }}>
      <Context.Provider value={{ hello: "javascript" }}>
        <ChildComponent />
      </Context.Provider>
    </Context.Provider>
  );
}

function ChildComponent() {
  const value = useContext(Context);

  // reactê°€ ì•„ë‹Œ javascript ê°€ ë°˜í™˜ëœë‹¤.
  return <div>{value ? value.hello : ""}</div>;
}
```

useContextëŠ” ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ Context.Providerì˜ ê°’ì„ ë°˜í™˜í•œë‹¤. ìœ„ ì˜ˆì œì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ javascriptë¥¼ ë°˜í™˜í•œë‹¤.

**useContext ì¡´ì¬ ì—¬ë¶€ í™•ì¸í•˜ëŠ” ë°©ë²•**

```jsx
function useMyContext() {
  const context = useContext(Context);

  if (!context) {
    throw new Error(
      "useContextë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Context.Providerê°€ í•„ìš”í•©ë‹ˆë‹¤."
    );
  }

  return context;
}

function Component() {
  const { hello } = useMyContext();

  return <div>{hello}</div>;
}
```

#### useContext í›…ì„ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì 

- ì»´í¬ë„ŒíŠ¸ ì¬í™œìš©ì´ ì–´ë ¤ì›Œì§„ë‹¤.
- ì½˜í…ìŠ¤íŠ¸ ë£¨íŠ¸ì—ë§Œ ë‘ê²Œ ë˜ë©´ ë” ë§ì€ ì½˜í…ìŠ¤íŠ¸ë¡œ ë‘˜ëŸ¬ì‹¸ì¼ ê²ƒì´ê³ , ë¶ˆí•„ìš”í•˜ê²Œ ë¦¬ì†ŒìŠ¤ê°€ ë‚­ë¹„ëœë‹¤.
- ì½˜í…ìŠ¤íŠ¸ëŠ” ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ APIê°€ ì•„ë‹ˆë¼ ìƒíƒœë¥¼ ì£¼ì…í•´ì£¼ëŠ” APIë‹¤.

**ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¡°ê±´**

1. ì–´ë– í•œ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ë¥¸ ìƒíƒœë¥¼ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆë‹¤.
2. í•„ìš”ì— ë”°ë¼ ì´ëŸ¬í•œ ìƒíƒœ ë³€í™”ë¥¼ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ì½˜í…ìŠ¤íŠ¸ëŠ” ë‘ ê°€ì§€ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¨ìˆœíˆ propsë¥¼ í•˜ìœ„ë¡œ ì „ë‹¬í•´ ì¤„ ë¿, ë Œë”ë§ì´ ìµœì í™”ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

### 3.1.7 useReducer

useStateì˜ ì‹¬í™” ë²„ì „ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. useStateì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ì¢€ ë” ë³µì¡í•œ ìƒíƒœê°’ì„ ë¯¸ë¦¬ ì •ì˜í•´ ë†“ì€ ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

#### useReducer í›…ì˜ êµ¬ì¡°

```jsx
const [state, dispatch] = useReducer(reducer, initialState);
```

- ë°˜í™˜ê°’
  - state: í˜„ì¬ ìƒíƒœ
  - dispatch: stateë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
- ì¸ìˆ˜
  - reducer: ê¸°ë³¸ actionì„ ì •ì˜í•˜ëŠ” í•¨ìˆ˜
  - initialState: ì´ˆê¸° ê°’
  - init(ì„ íƒ): ì´ˆê¹ƒê°’ì„ ì§€ì—°í•´ì„œ ìƒì„±ì‹œí‚¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜(ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”)

```jsx
type State = {
  count: number,
};

// action íƒ€ì…ê³¼ ë„˜ê²¨ì¤„ ê°’(payload) ì •ì˜
type Action = { type: "up" | "down" | "reset", payload?: State };

// ë¬´ê±°ìš´ ì—°ì‚°ì´ í¬í•¨ëœ ê²Œìœ¼ë¥¸ ì´ˆê¸°í™” í•¨ìˆ˜
function init(count: State): State {
  return count;
}

// ì´ˆê¸°ê°’ ì§€ì •
const initialState: State = { count: 0 };

function reducer(state: State, action: Action): State {
  switch (action.type) {
    case "up":
      return { count: state.count + 1 };
    case "down":
      return { count: state.count - 1 > 0 ? state.count - 1 : 0 };
    case "reset":
      return init(action.payload || { count: 0 });
    default:
      throw new Error("Invalid action");
  }
}

// ì´ˆê¸°í™” í•¨ìˆ˜ ì „ë‹¬
const [state, dispatch] = useReducer(reducer, initialState, init);
```

useStateë¡œ useReducerë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•

```jsx
const useReducer = (reducer, initialArg, init) => {
	const [state, setState] = useState(
		// ì´ˆê¸°í™” í•¨ìˆ˜ê°€ ìˆìœ¼ë©´ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³ , ì—†ìœ¼ë©´ ì´ˆê¸°ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤.
		init ? () => init(initialArg) : initialArg;
	);

	const dispatch = useCallback((action) => setState((prev) => reducer(prev, action)), [reducer]);

	return useMemo(() => [state, dispatch], [state, dispatch]);
}
```

### 3.1.8 useImperativeHandle

useImperativeHandleë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ React.forwardRefë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.

React.forwardRefëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.

refëŠ” ì´ë¯¸ ì˜ˆì•½ì–´ì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì´ë¥¼ í”¼í•˜ê¸° ìœ„í•´ React.forwardRefë¥¼ ì‚¬ìš©í•œë‹¤.

```jsx
const ChildComponent = forwardRef((props, ref) => {
  useEffect(() => {
    // { current: undefined }
    // { current: HTMLInputElement }
    console.log(ref);
  }, [ref]);
  return <div>Child</div>;
});

function ParentComponent() {
  const inputRef = useRef();

  return (
    <>
      <input ref={inputRef} />
      <ChildComponent ref={inputRef} />
    </>
  );
}
```

**useImperativeHandleëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë„˜ê²¨ë°›ì€ refë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” í›…ì´ë‹¤.**

```jsx
const Input = forwardRef((props, ref) => {
  // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë„˜ê²¨ë°›ì€ refì˜ ë™ì‘ì„ ì¶”ê°€ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.
  useImperativeHandle(
    ref,
    () => ({
      alert: () => alert(props.value),
    }),
    [props.value]
  );

  return <input ref={ref} {...props} />;
});

function App() {
  const inputRef = useRef();

  const [text, setText] = useState("");

  function handleClick() {
    // inputRefì— ì¶”ê°€í•œ alertë¼ëŠ” ë™ì‘ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    inputRef.current.alert();
  }

  function handleChange(e) {
    setText(e.target.value);
  }

  return (
    <>
      <input ref={inputRef} value={text} onChange={handleChange} />
      <button onClick={handleClick}>Focus</button>
    </>
  );
}
```

> #### ğŸ“Œ ì˜ˆì‹œ: í¼ ìœ íš¨ì„± ê²€ì‚¬ ë° ì‚¬ìš©ì ì •ì˜ ë©”ì„œë“œ

```jsx
const Input = forwardRef((props, ref) => {
  const inputRef = useRef();

  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current.focus();
    },
    getValue: () => inputRef.current.value,
  }));

  return <input ref={inputRef} {...props} />;
});

function App() {
  const nameRef = useRef();
  const emailRef = useRef();
  const passwordRef = useRef();

  function handleSubmit() {
    if (!nameRef.current.getValue()) {
      alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      nameRef.current.focus();
      return;
    }
    if (!emailRef.current.getValue()) {
      alert("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      emailRef.current.focus();
      return;
    }
    if (!passwordRef.current.getValue()) {
      alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      passwordRef.current.focus();
      return;
    }
    alert("í¼ ì œì¶œ ì™„ë£Œ!");
  }

  return (
    <>
      <Input ref={nameRef} placeholder="ì´ë¦„" />
      <Input ref={emailRef} placeholder="ì´ë©”ì¼" />
      <Input ref={passwordRef} placeholder="ë¹„ë°€ë²ˆí˜¸" type="password" />
      <button onClick={handleSubmit}>ì œì¶œ</button>
    </>
  );
}
```

**ì¥ì **

- ê° Input í•„ë“œì˜ ê°’ì„ getValue() ë©”ì„œë“œë¥¼ í†µí•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ.
- focus() ë©”ì„œë“œë¥¼ ë…¸ì¶œí•˜ì—¬, ë¯¸ì…ë ¥ëœ í•„ë“œì— ìë™ìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ë§ì¶œ ìˆ˜ ìˆìŒ.
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ Input ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ.

### 3.1.9 useLayoutEffect

> **ì´ í•¨ìˆ˜ì˜ ì‹œê·¸ë‹ˆì²˜ëŠ” useEffectì™€ ë™ì¼í•˜ë‚˜, ëª¨ë“  DOMì˜ ë³€ê²½ í›„ì— ë™ê¸°ì ìœ¼ë¡œ ë°œìƒí•œë‹¤.**

DOM ë³€ê²½ì´ë€ ë Œë”ë§ì´ì§€, ë¸Œë¼ìš°ì €ì— ì‹¤ì œë¡œ í•´ë‹¹ ë³€ê²½ ì‚¬í•­ì´ ë°˜ì˜ë˜ëŠ” ì‹œì ì´ ì•„ë‹ˆë‹¤.

**ì‹¤í–‰ ìˆœì„œ**

1. ë¦¬ì•¡íŠ¸ê°€ DOMì„ ì—…ë°ì´íŠ¸
2. useLayoutEffect ì‹¤í–‰
3. ë¸Œë¼ìš°ì €ì— ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜
4. useEffect ì‹¤í–‰

ì¦‰, useLayoutEffectëŠ” useEffectë³´ë‹¤ í•­ìƒ ë¨¼ì € ì‹¤í–‰ëœë‹¤.

ë™ê¸°ì ìœ¼ë¡œ ë°œìƒí•œë‹¤ëŠ” ê²ƒì€ useLayoutEffectê°€ ëë‚˜ê¸° ì „ê¹Œì§€ ê¸°ë‹¤ë¦° ë‹¤ìŒì— í™”ë©´ì„ ê·¸ë¦°ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì–´ë””ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ? **DOMì€ ê³„ì‚°ëì§€ë§Œ ì´ê²ƒì´ í™”ë©´ì— ë°˜ì˜ë˜ê¸° ì „ì— í•˜ê³  ì‹¶ì€ ì‘ì—…ì´ ìˆì„ ë•Œ**ì™€ ê°™ì´ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•˜ì.

- DOM ìš”ì†Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì• ë‹ˆë©”ì´ì…˜, ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì œì–´í•  ë•Œ ì‚¬ìš©í•˜ë©´ ë” ìì—°ìŠ¤ëŸ¬ìš´ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.

### 3.1.10 useDebugValue

ê°œë°œ ê³¼ì •ì—ì„œ ë””ë²„ê¹…í•˜ê³  ì‹¶ì€ ì •ë³´ë¥¼ ì¶œë ¥í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë¦¬ì•¡íŠ¸ ê°œë°œì ë„êµ¬ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.

```jsx
// í˜„ì¬ ì‹œê°„ì„ ë°˜í™˜í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ í›…
function useDate() {
  const date = new Date();
  useDebugValue(date, (date) => `í˜„ì¬ ì‹œê°„: ${date.toISOString()}`);
  return date;
}
```

ë¦¬ì•¡íŠ¸ ê°œë°œì ë„êµ¬ì˜ Components ì˜ì—­ì— ê°’ì´ ì¶œë ¥ëœë‹¤.

**useDebugValueëŠ” ì˜¤ì§ ë‹¤ë¥¸ í›… ë‚´ë¶€ì—ì„œë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.** ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì—ì„œ ì‹¤í–‰í•˜ë©´ ì‘ë™í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.

### 3.1.11 í›…ì˜ ê·œì¹™

ESLint ê·œì¹™: `react-hooks/rules-of-hooks`

**ë¦¬ì•¡íŠ¸ ê³µì‹ ë¬¸ì„œì˜ í›… ì‚¬ìš© ê·œì¹™**

1. ìµœìƒìœ„ì—ì„œë§Œ í›…ì„ í˜¸ì¶œí•´ì•¼ í•œë‹¤. ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸, ì¤‘ì²©ëœ í•¨ìˆ˜ ë‚´ì—ì„œ í›…ì„ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤. ì´ ê·œì¹™ì„ ë”°ë¼ì•¼ë§Œ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ í•­ìƒ ë™ì¼í•œ ìˆœì„œë¡œ í›…ì´ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.
2. í›…ì„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë¦¬ì•¡íŠ¸ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸, í˜¹ì€ ì‚¬ìš©ì ì •ì˜ í›…ì˜ ë‘ ê°€ì§€ ê²½ìš°ë¿ì´ë‹¤. ì¼ë°˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ì—ì„œëŠ” í›…ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

í›…ì— ëŒ€í•œ ì •ë³´ ì €ì¥ì€ ë¦¬ì•¡íŠ¸ ì–´ë”˜ê°€ì— indexì™€ ê°™ì€ í‚¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.(ì‹¤ì œë¡œëŠ” ê°ì²´ ê¸°ë°˜ ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸ì— ê°€ê¹Œì›€)

**ì ˆëŒ€ í›…ì€ ì¡°ê±´ë¬¸, ë°˜ë³µë¬¸ ë“±ì— ì˜í•´ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ìˆœì„œë¡œ ì‹¤í–‰ë˜ê²Œ í•´ì„œëŠ” ì•ˆëœë‹¤.**

**ì¡°ê±´ë¬¸ì´ í•„ìš”í•˜ë‹¤ë©´ ë°˜ë“œì‹œ í›… ë‚´ë¶€ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.**

## 3.2 ì‚¬ìš©ì ì •ì˜ í›…ê³¼ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ ì¤‘ ë¬´ì—‡ì„ ì¨ì•¼ í• ê¹Œ?

### 3.2.1 ì‚¬ìš©ì ì •ì˜ í›…

ì‚¬ìš©ì ì •ì˜ í›…ì€ ì„œë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ê°™ì€ ë¡œì§ì„ ê³µìœ í•˜ê³ ì í• ë•Œ ì‚¬ìš©í•œë‹¤.

ì‚¬ìš©ì ì •ì˜ í›…ì˜ ê·œì¹™ ì¤‘ í•˜ë‚˜ëŠ” ì´ë¦„ì´ ë°˜ë“œì‹œ `use`ë¡œ ì‹œì‘í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

```jsx
function useFetch<T>(
	url: string,
	{ method, body }: { method: string, body?: XMLHttpRequestBodyInit },
) {
	// ì‘ë‹µ ê²°ê³¼
	const [result, setResult] = useState<T | undefined>();
	// ìš”ì²­ ì¤‘ ì—¬ë¶€
	const [isLoading, setIsLoading] = useState(false);
	// 2xx, 3xxë¡œ ì •ìƒ ì‘ë‹µì¸ì§€ ì—¬ë¶€
	const [ok, setOk] = useState<boolean | undefined>();
  // HTTP status code
	const [status, setStatus] = useState<number | undefined>();

	useEffect(() => {
		const abortController = new AbortController();

		;(async () => {
			setIsLoading(true);

			const response = await fetch(url, {
				method,
				body,
				signal: abortController.signal,
			});

			setOk(response.ok);
			setStatus(response.status);

			if (response.ok) {
				const apiResult = await response.json();
				setResult(apiResult);
			}

			setIsLoading(false);
		})();

		return () => {
			abortController.abort();
		}
	}, [url, method, body]);

	return { ok, result, isLoading, status };
}
```

ì‚¬ìš©ì ì •ì˜ í›…ì€ ì—¬ëŸ¬ ë¦¬ì•¡íŠ¸ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ë‹¤ì–‘í•˜ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.

- [useHooks](https://github.com/uidotdev/usehooks)
- [react-use](https://github.com/streamich/react-use)
- [ahooks](https://github.com/alibaba/hooks)

### 3.2.2 ê³ ì°¨ ì»´í¬ë„ŒíŠ¸

ë¦¬ì•¡íŠ¸ì˜ ê°€ì¥ ìœ ëª…í•œ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” React.memoì´ë‹¤.

#### React.memoë€?

ê¸°ë³¸ ìì‹ ì»´í¬ë„ŒíŠ¸ëŠ” propsê°€ ë³€ê²½ë˜ì§€ ì•Šë”ë¼ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•œë‹¤. ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ React.memoë¥¼ ì‚¬ìš©í•œë‹¤.

ë Œë”ë§í•˜ê¸°ì— ì•ì„œ propsë¥¼ ë¹„êµí•´ ì´ì „ê³¼ ê°™ë‹¤ë©´ ë Œë”ë§ ìì²´ë¥¼ ìƒëµí•˜ê³  ê¸°ì–µí•´ ë‘” ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.

#### ê³ ì°¨ í•¨ìˆ˜ ë§Œë“¤ì–´ë³´ê¸°

ê³ ì°¨ í•¨ìˆ˜ì˜ ì‚¬ì „ì  ì •ì˜: í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜

```js
function add(a) {
  return function (b) {
    return a + b;
  };
}

const result = add(1);
const result2 = result(2);

console.log(result2); // 3
```

a=1 ì´ë¼ëŠ” ì •ë³´ê°€ ë‹´ê¸´ í´ë¡œì €ê°€ resultì— í¬í•¨ëŒ”ê³ , result(2)ë¥¼ í˜¸ì¶œí•˜ë©´ í´ë¡œì €ì— ë‹´ê¸´ a=1ê³¼ b=2ë¥¼ ë”í•´ 3ì„ ë°˜í™˜í•œë‹¤.

> p.246
